name: Release

on:
  push:

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Checkout tools repo
        uses: actions/checkout@v2
        with:
          repository: asdf-vm/asdf
          path: .asdf
          ref: 'v0.8.1'
      - name: install plugin
        uses: ./ # Uses an action in the root directory
        env:
          DEBUG: true
        with:
          name: terraform
          url: https://github.com/asdf-community/asdf-hashicorp.git
          version: 1.0.6
          these: |
            terraform 1.0.6 https://github.com/asdf-community/asdf-hashicorp.git
            java openjdk-10 https://github.com/halcyon/asdf-java.git
            php 7.4.1 https://github.com/asdf-community/asdf-php.git

      - name: test installations
        run: |
          terraform --version
          java -version
          php --version
