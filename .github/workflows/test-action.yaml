name: Release

on:
  push:

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Checkout tools repo
        uses: actions/checkout@v2
        with:
          repository: asdf-vm/asdf
          path: .asdf
          ref: 'v0.8.1'
      - name: install plugin
        uses: ./
        with:
          these: |
            terraform 1.0.6 https://github.com/asdf-community/asdf-hashicorp.git
            goreleaser 0.177.0 https://github.com/kforsthoevel/asdf-goreleaser.git

      - name: test installations
        run: |
          . .asdf/asdf.sh
          terraform --version
          goreleaser --version
